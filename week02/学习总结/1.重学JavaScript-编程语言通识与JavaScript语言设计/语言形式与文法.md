# 语言形式与文法

## 高级程序设计语言

从组成的角度：

高级程序设计语言由三个基本因素组成：

- 语法：描述语言的构成规则（包括词法规则和语法规则）
- 语义：描述语法成分的含义
-  语用：描述语法成分的使用方法

## 形式语言理论

> 用数学方法研究自然语言（如英语）和人工语言（如程序设计语言）的产生方式、一般性质和规则的理论。

- 形式语言是模拟这些语言的一类数学语言，它采用数学符号，按照严格的语法规则构成。
- 形式语言理论是编译原理的重要理论基础，形式语言理论中主要讨论了语言和文法的数学机制以及语言和文法的分类。

### 产生式

> 由条件和动作组成的指令，即所谓的条件-活动规则 condition-action。在计算机中指Tiger编译器将源程序经过词法分析（Lexical Analysis）和语法分析（Syntax Analysis）后得到的一系列符合文法规则（Backus-Naur Form，BNF）的语句

- “产生式”这一术语是在1943年由美国数学家E.L.Post首先提出的，它根据串替代规则提出了一种称为Post机的计算模型，模型中的每一条规则称为产生式。
- 一个产生式规则表示的知识是一组产生式的有序集合

#### 基本形式示例

| **常用结构** | **示例**                                   |
| ------------ | ------------------------------------------ |
| 原因à结果    | 天下雨，地上湿                             |
| 条件à结论    | 如果把冰加热到0。以上，冰就会融化为水      |
| 前提à操作    | 若能找到一根合适的杠杆，就能撬起那座大山   |
| 事实à进展    | 夜来风雨声，花落知多少                     |
| 情况à行为    | 刚才开机了，意味着发出了捕获目标图像的信号 |

确定性规则知识的产生式表示
例如：

if 动物会飞 and 会下蛋 then 该动物是鸟

基本形式：if p then q，或者$p \to q$

不确定性规则知识的产生式表示
例如：

if 发烧 then 感冒(0.6)

基本形式：if p then q(置信度)
或者：$p \to q$(置信度)

确定性事实性知识的产生式表示
例：

老李年龄是40岁：(Li, age, 40)
老李和老王是朋友：(friend, Li, Wang)

三元组表示：(对象，属性，值)

或者：(关系，对象1，对象2)

不确定性事实性知识的产生式表示
例：

老李年龄很可能是40岁：(Li, age, 40, 0.8)
老李和老王不大可能是朋友：(friend, Li, Wang, 0.1)

三元组表示：(对象，属性，值, 置信度)

或者：(关系，对象1，对象2, 置信度)

#### 产生式规则的语法描述- BNF（巴斯克范式）

> BNF 规定是[推导规则](http://zh.wikipedia.org/w/index.php?title=推导规则&action=edit&redlink=1)(产生式)的集合。BNF是John Backus 在20世纪90年代提出的用以简洁描述一种编程语言的语言。是用数学语言描述逐步释义的过程。推理过程。 if ...then

```
<符号> ::= <使用符号的表达式>
```

- 符号`::=`表示“定义为”
- `""`表示字符
- 符号`|`表示“或者是”， or
- "<>"表示必选内容
- 符号`[]`表示可缺省

这里的 <[符号](http://zh.wikipedia.org/wiki/符号)> 是[非终结符](http://zh.wikipedia.org/w/index.php?title=非终结符&action=edit&redlink=1)，而[表达式](http://zh.wikipedia.org/wiki/表达式)由一个符号序列，或用指示[选择](http://zh.wikipedia.org/wiki/选择)的[竖杠](http://zh.wikipedia.org/w/index.php?title=竖杠&action=edit&redlink=1)'|' 分隔的多个符号序列构成，每个符号序列整体都是左端的符号的一种可能的[替代](http://zh.wikipedia.org/w/index.php?title=替代&action=edit&redlink=1)。从未在左端出现的符号叫做[终结符](http://zh.wikipedia.org/w/index.php?title=终结符&action=edit&redlink=1)。

##### 基本原理

BNF类似一种数学游戏：从一个符号开始（叫做起始标志，实例中常用S表示），然后给出替换前面符号的规则。BNF语法定义的语言只不过是一个字符串集合，你可以按照下述规则书写，这些规则叫做书写规范（生产式规则），形式如下：
   symbol := alternative1 | alternative2 ...
   每条规则申明:=左侧的符号必须被右侧的某一个可选项代替。替换项用“|”分割（有时用“::=”替换“:=”，但意思是一样的）。替换项通常有两个符号和终结符构成。之所以叫做终结符是因为没有针对他们的书写规范，他们是书写过程的终止（符号通常被叫做非终止符，也有人叫非终端）。

##### 举例

###### 列子1

基本结构为：

<non-terminal> ::= <replacement>

non-terminal意为非终止符，就是说我们还没有定义完的东西，还可以继续由右边的replacement，也就是代替物来进一步解释、定义。

举个例子：

在中文语法里，一个句子一般由“主语”、“谓语”和“宾语”组成，主语可以是名词或者代词，谓语一般是动词，宾语可以使形容词，名词或者代词。那么“主语”、“谓语”和“宾语”就是非终止符，因为还可以继续由“名词”、“代词”、“动词”、“形容词”等替代。

例1. <句子> ::= <主语><谓语><宾语>

例2. <主语> ::= <名词>|<代词>

例3. <谓语>::=<动词>

例4. <宾语>::=<形容词>|<名词>|<代词>

例5. <代词>::=<我>

例6. <动词>::=<吃>

例7. <动词>::=<喜欢>

例8. <名词>::=<车>

例9. <名词>::=<肉>

如上，在::=左边的就是non-terminal非终止符，右边的就是replacement，可以是一系列的非终止符，如例1中的replacement便是后面例234左边的非终止符，也可以是终止符，如例56789的右边，找不到别的符号来进一步代替。

因此，终止符永远不会出现在左边。一旦我们看到了终止符，这个描述过程就结束了。

###### 例子2

java中的switch定义

```js
<switch statement> ::= switch ( <expression> ) <switch block>
                               
<switch block> ::= { <switch block statement groups><switch labels> }

<switch block statement groups> ::= <switch block statement group> | <switch block statement groups> <switch block statement group>

<switch block statement group> ::= <switch labels>
    
<block statements><switch labels> ::= <switch label> | <switch labels> 

<switch label><switch label> ::= case <constant expression> :<……> | default :< ……>
```

### 文法

> 文法是定义描述语言的语法结构的一组形式规则，一个程序语言的文法之目的就是用适当条数的语法规则把该程序语言的全部成分描述出来。

#### 类别

- 0 型文法（短语文法）：0 型文法所有产生式的左部 α 和右部 β 都是符号串，对它们没作任何限制。即产生式的左部至少有一个非终结符右边随意。若对0 型文法的产生式作某些限制，则可以给出其他三种类型的文法。

- 1 型文法（上下文有关文法）：1型文法所有产生式左部可以含有一个、两个或两个以上的字符，但其中必须至少有一个非终结符。产生式右部的符号串的长度必须大于等于左边符号串的长度。对于产生式 “S→ε”是1  型文法中的一个特例。 

- 2 型文法（上下文无关文法 | 左线性文法）：2 型文法的所有产生式左部是单个非终结符，右部是由终结符和非终结符组成的符号串。

- 3 型文法（右线性文法 | 正规文法）：3 型文法所有的产生式右部是单个终结符或单一终结符后跟着单一非终结符。产生式右部符号串长度小于等于2。

#### 判断

- 先从最复杂的3型文法判断，再往下看。

#### 文法关系

![文法关系](.\img\文法关系图.jpg)

#### 文法及自动机

- 0 型：图灵机

- 1 型：线性界限自动机
- 2 型：下推自动机
- 3 型：有穷自动机